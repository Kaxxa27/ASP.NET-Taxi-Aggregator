@using System.Security.Claims;
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>@ViewData["Title"] - TaxiApp</title>

	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/login.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/_layout.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/TaxiApplication.WEB.styles.css" asp-append-version="true" />
</head>
<body>

	<div>
		@*Main NavBar*@
		<nav class="navbar navbar-expand-xl navbar-light main-nav-color-bg-gold main-nav-style-bold-20px">
			<div class="container-fluid">
				<div class="collapse navbar-collapse " id="navbarBasic">

					<ul class="navbar-nav  mb-2 mb-xl-0 d-flex justify-content-center">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" asp-controller="Home" asp-action="Index" asp-area="">Главная</a>
						</li>
						@if (User.Identity.IsAuthenticated is not true)
						{
							<li class="nav-item">
								<a class="nav-link active" aria-current="page" asp-controller="Account" asp-action="Login" asp-area="">Войти</a>
							</li>
							<li class="nav-item">
								<a class="nav-link active" aria-current="page" asp-controller="Account" asp-action="Registration" asp-area="">Зарегистрироваться</a>
							</li>
						}
					</ul>

					@*Right side NavBar*@
					@if (User.Identity.IsAuthenticated is true)
					{
						<div class="navbar-nav ms-auto">
							@if (User.IsInRole(TaxiApplication.Domain.Enum.Role.Admin.ToString()))
							{
								<a class="nav-link active" aria-current="page" asp-controller="Client" asp-action="Index" asp-area="Admin">Список клиентов</a>
								<a class="nav-link active" aria-current="page" asp-controller="Client" asp-action="AdminPanel" asp-area="Admin">Админ панель</a>
								<a class="nav-link active" aria-current="page" asp-controller="Client" asp-action="AddClient" asp-area="Admin">AddClient</a>
							}
							else if (User.IsInRole(TaxiApplication.Domain.Enum.Role.Client.ToString()))
							{
								<a class="nav-link active" aria-current="page" asp-controller="Map" asp-action="CreateTaxiOrder" asp-area="Map">Сделать заказ</a>
								<a class="nav-link active" aria-current="page" asp-controller="Map" asp-action="GetTaxiOrders" asp-area="Map">История заказов</a>
							}

							<a class="nav-link active me-2" aria-current="page" asp-controller="Account" asp-action="Logout" asp-route-area="">Профиль</a>
							<a class="nav-link active me-2" aria-current="page" asp-controller="Account" asp-action="Logout" asp-route-area="">Выйти</a>
						</div>
					}
				</div>
			</div>
		</nav>
	</div>

@*	<div>
		<p>
			@if (User.Identity.IsAuthenticated is not true)
			{
				
			}
			else
			{
				<div>
					<a asp-controller="Home" asp-action="Index" asp-area="">Главная</a>
				</div>
				<a asp-controller="Account" asp-action="Logout" asp-route-area="">Выйти</a>
				<div>
					<p>
						Логин: @User.FindFirst(ClaimsIdentity.DefaultNameClaimType)?.Value.
						Роль: @User.FindFirst(ClaimsIdentity.DefaultRoleClaimType)?.Value
					</p>
				</div>
			}

			@if (User.IsInRole(TaxiApplication.Domain.Enum.Role.Admin.ToString()))
			{
				<div>
					<label><h1><b>Admin:</b></h1></label>
					<a asp-controller="Client" asp-action="Index" asp-area="Admin">GetAllUsersLink</a>
					<a asp-controller="Client" asp-action="AddClient" asp-area="Admin">AddClient</a>
					<a asp-controller="Client" asp-action="AdminPanel" asp-area="Admin">AdminPanel</a>
					<a asp-controller="Map" asp-action="Index" asp-area="">Get_Map</a>
				</div>
			}
			else if (User.IsInRole(TaxiApplication.Domain.Enum.Role.Client.ToString()))
			{
				<div>
					<label><h1><b>Client:</b></h1></label>
					<a asp-controller="Client" asp-action="Index" asp-area="Admin">GetAllUsersLink</a>
					<a asp-controller="Map" asp-action="CreateTaxiOrder" asp-area="Map">CreateTaxiOrder</a>
					<a asp-controller="Map" asp-action="GetTaxiOrders" asp-area="Map">GetTaxiOrders</a>
				</div>
			}

		</p>
	</div>*@

	<div class="container">
		<main role="main" class="pb-3">
			@RenderBody()
		</main>
	</div>


	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="~/js/site.js" asp-append-version="true"></script>
	@await RenderSectionAsync("Scripts", required: false)

	@*Стиль для всех таблиц class="table"*@
	@*<style>
	.table {
	width: 100%;
	border: none;
	margin-bottom: 20px;
	border-collapse: separate;
	}

	.table thead th {
	font-weight: bold;
	text-align: left;
	border: none;
	padding: 10px 15px;
	background: #EDEDED;
	font-size: 14px;
	border-top: 1px solid #ddd;
	}

	.table td {
	word-wrap: break-word;
	}

	.table tr th:first-child,
	.table tr td:first-child {
	border-left: 1px solid #ddd;
	}

	.table tr th:last-child,
	.table tr td:last-child {
	border-right: 1px solid #ddd;
	}

	.table thead tr th:first-child {
	border-radius: 20px 0 0 0;
	}

	.table thead tr th:last-child {
	border-radius: 0 20px 0 0;
	}

	.table tbody td {
	text-align: left;
	border: none;
	padding: 10px 15px;
	font-size: 14px;
	vertical-align: top;
	}

	.table tbody tr:nth-child(even) {
	background: #F8F8F8;
	}

	.table tbody tr:last-child td {
	border-bottom: 1px solid #ddd;
	}

	.table tbody tr:last-child td:first-child {
	border-radius: 0 0 0 20px;
	}

	.table tbody tr:last-child td:last-child {
	border-radius: 0px;
	border-bottom-right-radius: 20px;
	}
	</style>*@
</body>

</html>
